# keyword-monitor
NA平台插件-关键词监听订阅
关键词监听订阅插件

监听指定聊天频道的消息，当检测到配置的关键词时，
自动向订阅频道发送通知消息，实现消息订阅和关键词提醒功能。

## 主要功能

- **多频道监听**: 支持同时监听多个私聊或群聊频道
- **关键词匹配**: 支持为每个监听频道配置独立的关键词列表
- **灵活订阅**: 每个监听频道可以配置不同的通知目标频道
- **消息模板**: 支持自定义通知消息格式
- **多种匹配模式**: 支持模糊匹配、精确匹配和正则表达式匹配
- **通知控制**: 可配置通知间隔，避免频繁通知

## 配置说明

### 监听配置格式
每个监听项格式：`监听频道|关键词1,关键词2|通知频道`
- 监听频道：要监听的聊天频道标识
- 关键词列表：用逗号分隔的关键词
- 通知频道：触发关键词时发送通知的目标频道

### 频道标识格式
- 私聊：`onebot_v11-private_QQ号`
- 群聊：`onebot_v11-group_群号`

### 正则表达式支持
当匹配模式设置为"正则表达式"时，关键词将被视为正则表达式模式：
- `\b错误\d+\b` - 匹配"错误123"、"错误456"等
- `(紧急|urgent)` - 匹配"紧急"或"urgent"
- `@\w+` - 匹配@用户名格式
- `订单.*完成` - 匹配"订单XXX完成"

## 常见使用示例

### 普通关键词监听：
```
onebot_v11-group_123456|重要,紧急,@管理员|onebot_v11-private_789012
onebot_v11-private_111222|订单,发货|onebot_v11-group_333444
```

### 正则表达式监听：
```
onebot_v11-group_技术群|\b错误\d+\b,异常.*数据库|onebot_v11-private_运维
onebot_v11-group_客服群|投诉.*产品,退款.*申请|onebot_v11-group_管理群
```


## 正则表达式语法参考

### 基础符号
- `\b` - 单词边界，精确匹配完整单词
- `\w` - 匹配字母、数字、下划线
- `\d` - 匹配数字
- `.` - 匹配任意字符
- `*` - 前面字符可重复0次或多次
- `+` - 前面字符必须出现1次或多次
- `?` - 前面字符可选（0次或1次）

### 分组和选择
- `()` - 分组
- `|` - 或运算符（在括号内）
- `[]` - 字符集合

### 常用示例

#### 精确匹配
```
\b重要\b          # 只匹配"重要"，不匹配"不重要"
```

#### 多选一
```
(紧急|urgent)     # 匹配"紧急"或"urgent"
```

#### 数字匹配
```
\d+              # 匹配任意数字
错误\d+          # 匹配"错误123"、"错误456"
```

#### @用户匹配
```
@\w+             # 匹配"@张三"、"@admin"
@管理员           # 匹配"@管理员"
```

#### 状态匹配
```
订单.*完成        # 匹配"订单ABC完成"
```

### 配置示例转换

原始配置：
```
onebot_v11-group_123456|重要,紧急,@管理员|onebot_v11-private_789012
```

正则版本：
```
onebot_v11-group_123456|\b重要\b,\b紧急\b,@管理员|onebot_v11-private_789012
```

进阶版本：
```
onebot_v11-group_123456|(重要|紧急|urgent),@\w*管理员,错误\d+|onebot_v11-private_789012
```

## 版本信息

- 版本: 2.0.1
- 作者: xiaoyu  
- 项目地址: https://github.com/yyl0124/keyword_monitor
